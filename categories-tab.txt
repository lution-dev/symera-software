                  <TabsContent value="categories" className="pt-4">
                    <div className="mb-4 text-sm text-muted-foreground px-1">
                      Visualize a distribuição do orçamento por categorias. Esta visão permite analisar onde estão concentrados os recursos do seu evento.
                    </div>
                    
                    {Object.keys(stats.byCategory).length === 0 ? (
                      <div className="text-center py-8">
                        <PieChart className="h-12 w-12 mx-auto text-muted-foreground mb-4" />
                        <h3 className="text-lg font-medium mb-2">Nenhum item no orçamento ainda</h3>
                        <p className="text-muted-foreground mb-4">
                          Adicione despesas ou itens para visualizar as estatísticas por categoria
                        </p>
                        <Button onClick={() => setIsAddItemOpen(true)}>
                          <Plus className="h-4 w-4 mr-2" />
                          Adicionar Despesa
                        </Button>
                      </div>
                    ) : (
                      <div className="space-y-8">
                        {/* Gráfico de pizza */}
                        <Card>
                          <CardHeader>
                            <CardTitle className="text-xl">Distribuição por Categoria</CardTitle>
                            <CardDescription>
                              Visão geral de como o orçamento está distribuído entre as diferentes categorias
                            </CardDescription>
                          </CardHeader>
                          <CardContent className="h-[350px]">
                            <ResponsiveContainer width="100%" height="100%">
                              <RechartsChart>
                                <Pie
                                  data={Object.entries(stats.byCategory).map(([category, amount]) => ({
                                    category: BUDGET_CATEGORIES.find(c => c.value === category)?.label || category,
                                    value: amount,
                                    categoryKey: category
                                  }))}
                                  cx="50%"
                                  cy="50%"
                                  labelLine={true}
                                  outerRadius={110}
                                  fill="#8884d8"
                                  dataKey="value"
                                  nameKey="category"
                                  label={({ name, percent }) => `${name}: ${(percent * 100).toFixed(0)}%`}
                                >
                                  {Object.entries(stats.byCategory).map(([category], index) => {
                                    // Array de cores para o gráfico de pizza
                                    const COLORS = [
                                      '#3B82F6', '#10B981', '#F59E0B', '#EF4444', 
                                      '#8B5CF6', '#EC4899', '#06B6D4', '#D97706',
                                      '#6366F1', '#84CC16', '#14B8A6', '#F43F5E',
                                      '#8B5CF6', '#22D3EE', '#F97316', '#A855F7'
                                    ];
                                    return (
                                      <Cell 
                                        key={`cell-${index}`} 
                                        fill={COLORS[index % COLORS.length]} 
                                      />
                                    );
                                  })}
                                </Pie>
                                <Tooltip 
                                  formatter={(value) => formatCurrency(Number(value))}
                                  contentStyle={{ backgroundColor: 'rgba(22, 28, 36, 0.9)', border: 'none', borderRadius: '4px', color: '#fff' }}
                                />
                                <Legend />
                              </RechartsChart>
                            </ResponsiveContainer>
                          </CardContent>
                        </Card>
                        
                        {/* Tabela de apoio */}
                        <Card>
                          <CardHeader>
                            <CardTitle className="text-xl">Detalhamento por Categoria</CardTitle>
                            <CardDescription>
                              Análise detalhada do orçamento por categoria
                            </CardDescription>
                          </CardHeader>
                          <CardContent>
                            <div className="border rounded-md">
                              <div className="grid grid-cols-4 gap-4 p-4 bg-muted/50 font-medium text-sm">
                                <div>Categoria</div>
                                <div className="text-center">Itens</div>
                                <div className="text-right">Valor Total</div>
                                <div className="text-right">% do Orçamento</div>
                              </div>
                              
                              <div className="divide-y">
                                {Object.entries(stats.byCategory).map(([category, amount]) => {
                                  // Contar quantos itens pertencem a esta categoria
                                  const itemsCount = [...filteredBudgetItems, ...filteredExpenses]
                                    .filter(item => item.category === category).length;
                                  
                                  // Calcular a porcentagem do orçamento
                                  const percentOfBudget = stats.budget > 0 
                                    ? ((amount / stats.budget) * 100).toFixed(0) 
                                    : ((amount / stats.totalExpenses) * 100).toFixed(0);
                                    
                                  return (
                                    <div key={category} className="grid grid-cols-4 gap-4 p-4 hover:bg-muted/20">
                                      <div className="font-medium flex items-center">
                                        {BUDGET_CATEGORIES.find(c => c.value === category)?.label || category}
                                      </div>
                                      <div className="text-center">{itemsCount}</div>
                                      <div className="text-right font-medium">{formatCurrency(amount)}</div>
                                      <div className="text-right">{percentOfBudget}%</div>
                                    </div>
                                  );
                                })}
                              </div>
                            </div>
                          </CardContent>
                        </Card>
                        
                        {/* Aviso para itens sem categoria */}
                        {Object.entries(stats.byCategory)
                          .filter(([category]) => category === 'other' || category === 'outros')
                          .length > 0 && (
                          <div className="mt-4 bg-amber-50 border border-amber-200 rounded-md p-4">
                            <div className="flex">
                              <AlertCircle className="h-5 w-5 text-amber-600 mr-2 flex-shrink-0" />
                              <div>
                                <h4 className="font-medium text-amber-800">Alguns itens não estão categorizados</h4>
                                <p className="text-sm text-amber-700 mt-1">
                                  Deseja categorizar estes itens agora?
                                </p>
                                <div className="mt-3">
                                  <Button 
                                    variant="outline" 
                                    className="bg-amber-100 border-amber-300 hover:bg-amber-200 text-amber-900"
                                    onClick={() => setActiveTab("expenses")}
                                  >
                                    Categorizar Itens
                                  </Button>
                                </div>
                              </div>
                            </div>
                          </div>
                        )}
                                const nonVendorCategories = [
                                  'staff', 'permits', 'insurance', 'admin', 
                                  'marketing', 'fees', 'equipment', 'accommodation', 'entertainment'
                                ];
                                return nonVendorCategories.includes(category);
                              })
                              .map(([category, amount]) => (
                                <div key={category} className="border rounded-lg p-4 bg-blue-50/30">
                                  <div className="flex items-center justify-between mb-2">
                                    <div className="font-medium">
                                      {BUDGET_CATEGORIES.find(c => c.value === category)?.label || category}
                                    </div>
                                    <div className="text-right">
                                      <div className="font-medium">{formatCurrency(amount)}</div>
                                      <div className="text-sm text-muted-foreground">
                                        {stats.budget > 0 
                                          ? `${((amount / stats.budget) * 100).toFixed(1)}% do orçamento` 
                                          : `${((amount / stats.totalExpenses) * 100).toFixed(1)}% do total`}
                                      </div>
                                    </div>
                                  </div>
                                  <Progress
                                    value={stats.budget > 0 ? (amount / stats.budget) * 100 : (amount / stats.totalExpenses) * 100}
                                    className="h-2"
                                    indicatorClassName="bg-blue-500"
                                  />
                                </div>
                              ))}
                          </div>
                        </div>
                        
                        {/* Categorias de fornecedores */}
                        <div className="space-y-3">
                          <div className="flex items-center space-x-2 mb-2">
                            <Store className="h-5 w-5 text-amber-600" />
                            <h3 className="text-lg font-medium text-amber-800">Custos de Fornecedores</h3>
                          </div>
                          
                          <div className="space-y-3 pl-7">
                            {Object.entries(stats.byCategory)
                              .filter(([category]) => {
                                // Filtrar apenas categorias típicas de fornecedores
                                const vendorCategories = [
                                  'venue', 'catering', 'decoration', 'music', 
                                  'photography', 'video', 'invitations', 'attire',
                                  'transportation', 'gifts'
                                ];
                                return vendorCategories.includes(category);
                              })
                              .map(([category, amount]) => (
                                <div key={category} className="border rounded-lg p-4 bg-amber-50/30">
                                  <div className="flex items-center justify-between mb-2">
                                    <div className="font-medium">
                                      {BUDGET_CATEGORIES.find(c => c.value === category)?.label || category}
                                    </div>
                                    <div className="text-right">
                                      <div className="font-medium">{formatCurrency(amount)}</div>
                                      <div className="text-sm text-muted-foreground">
                                        {stats.budget > 0 
                                          ? `${((amount / stats.budget) * 100).toFixed(1)}% do orçamento` 
                                          : `${((amount / stats.totalExpenses) * 100).toFixed(1)}% do total`}
                                      </div>
                                    </div>
                                  </div>
                                  <Progress
                                    value={stats.budget > 0 ? (amount / stats.budget) * 100 : (amount / stats.totalExpenses) * 100}
                                    className="h-2"
                                    indicatorClassName="bg-amber-500"
                                  />
                                </div>
                              ))}
                          </div>
                        </div>
                        
                        {/* Outras categorias */}
                        <div className="space-y-3">
                          <div className="flex items-center space-x-2 mb-2">
                            <FileText className="h-5 w-5 text-gray-600" />
                            <h3 className="text-lg font-medium text-gray-800">Outras Categorias</h3>
                          </div>
                          
                          <div className="space-y-3 pl-7">
                            {Object.entries(stats.byCategory)
                              .filter(([category]) => {
                                const allDefinedCategories = [
                                  'venue', 'catering', 'decoration', 'music', 
                                  'photography', 'video', 'invitations', 'attire',
                                  'transportation', 'gifts', 'staff', 'permits', 
                                  'insurance', 'admin', 'marketing', 'fees', 
                                  'equipment', 'accommodation', 'entertainment'
                                ];
                                return !allDefinedCategories.includes(category);
                              })
                              .map(([category, amount]) => (
                                <div key={category} className="border rounded-lg p-4">
                                  <div className="flex items-center justify-between mb-2">
                                    <div className="font-medium">
                                      {BUDGET_CATEGORIES.find(c => c.value === category)?.label || category}
                                    </div>
                                    <div className="text-right">
                                      <div className="font-medium">{formatCurrency(amount)}</div>
                                      <div className="text-sm text-muted-foreground">
                                        {stats.budget > 0 
                                          ? `${((amount / stats.budget) * 100).toFixed(1)}% do orçamento` 
                                          : `${((amount / stats.totalExpenses) * 100).toFixed(1)}% do total`}
                                      </div>
                                    </div>
                                  </div>
                                  <Progress
                                    value={stats.budget > 0 ? (amount / stats.budget) * 100 : (amount / stats.totalExpenses) * 100}
                                    className="h-2"
                                    indicatorClassName="bg-gray-500"
                                  />
                                </div>
                              ))}
                          </div>
                        </div>
                      </div>
                    )}
                  </TabsContent>
                  
                  <TabsContent value="vendors" className="pt-4">
                    <div className="mb-6 text-sm text-muted-foreground px-1">
                      Gerencie os fornecedores do seu evento e seus respectivos custos. Eles podem estar associados a despesas e itens do orçamento.
                    </div>
                    
